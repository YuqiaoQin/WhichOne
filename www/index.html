<!DOCTYPE html>

<html>

<head>

    <meta name="viewport" id="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
    <link href='http://fonts.googleapis.com/css?family=Abel' rel='stylesheet'>

    <style>
        body {
            font-family: 'Abel' !important;
        }

        .ui-page {
            width: 100%;
            height: 100%;
            margin: 0px;
            padding: 0;
            overflow-y: hidden;
            background-color: white;
        }

        .ui-content {
            padding: 0px;
            height: inherit;
            width: inherit;
        }

        .ui-bar-c {
            background: white;
        }

        .ui-btn-c {
            width: 20px;
            height: 10px;
            color: black;
            margin-left: 10px;
        }

        .mom {
            display: block;
        }

        .child {
            position: absolute;
            top:0px;
            bottom: 0px;
            margin: auto;
        }

        #header {
            background-image: url("./img/wo-header-bg.jpg");
            background-repeat: repeat-x;
            background-position: bottom;
            position: absolute;
            padding-left: 3.5%;
            padding-right: 3.5%;
            padding-top: 2%;
            width: 100%;
            height: 7%;
            z-index: 998;
            box-sizing: border-box;
        }

        #searchbutton {
            width: 7%;
            height: 100%;
            background-image: url("./img/search.png");
            background-position: center;
            background-repeat: no-repeat;
            background-size: 80%;
            right:3%;
        }

        #date {
            width: 80%;
            text-align: center;
            left: 0px;
            right:0px;
            height: 60%;
        }

        #topmenu {
            height: 100%;
            width: 7%;
            cursor: pointer;
            border-radius: 50%;
            background-image: url("./img/wo-profile.png");
            background-position: center;
            background-repeat: no-repeat;
            background-size: 80%;
            left: 3%;
        }

        #footer {
            background: url("./img/wo-bar.jpg");
            background-position: bottom;
            background-size: 100% 200%;
            height: 12%;
            width: 65%;
            margin-left: 17%;
            z-index: 998;
            position: absolute;
            bottom: 8%;
        }

        .p-content {
            margin-top: 20%;
            width: 100%;
            height: 75%;
        }

        .wo-pic {
            /*margin-left: 5%;*/
            height: 60.7%;
            width: auto;
            margin-left: 6.5%;
            margin-right: 4.5%;
        }

        #p1-pic {
            background: url("./img/wo-p2-01.jpg");
            background-size: cover;
            background-repeat: no-repeat;
        }

        #p2-pic {
            background: url("./img/wo-p1-01.jpg");
            background-size: cover;
            background-repeat: no-repeat;
        }

        .wo-profile {
            width: 80%;
            height: 80%;
        }

        .wo-title1 {
            margin-left: 6.5%;
            margin-right: 4.5%;
            margin-top: 6%;
            font-size: 24px;
            text-align: center;
            font-family: 'font-family: "HelveticaNeue-CondensedBold", "HelveticaNeueBoldCondensed", "HelveticaNeue-Bold-Condensed", "Helvetica Neue Bold Condensed", "HelveticaNeueBold", "HelveticaNeue-Bold", "Helvetica Neue Bold", "HelveticaNeue", "Helvetica Neue", 'TeXGyreHerosCnBold', "Helvetica", "Tahoma", "Geneva", "Arial Narrow", "Arial", sans-serif; font-weight:600; font-stretch:condensed;';
        }

        .wo-title2 {
            margin-left: 9%;
            margin-right: 9%;
            margin-top: 2.4%;
            font-size: 16px;
            text-align: center;
            font-family: 'Abel';
        }

        .clickToRead {
            margin-top: 6%;
            margin-left: 8%;
            margin-right: 8%;
            font-size: 14px;
            text-align: center;
            font-family: 'Abel';
            color: rgb(220, 220, 220);
        }

        #profilePanel {
            transition: all 0.3s ease-in-out;
            width: 200px;
            height: 80%;
            background-color: rgba(255, 255, 255, 0.9);
            position: absolute;
            top: 0px;
            left: 0px;
            box-sizing: border-box;
            padding-top: 120px;
            z-index: 998;
            transform: translateX(-100%);
        }

        #goback {
            background-image: url("./img/goback.png");
            background-position: center;
            background-repeat: no-repeat;
            width: 200px;
            position: absolute;
            padding-top: 120px;
        }

        p.profilecontent {
            margin-left: 15px;
        }
    </style>

    <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script type="text/javascript" src="cordova.js"></script>
    <script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
    <script>
        window.addEventListener("load", function() {

                    // var app = require('express')();
                    // var fs = require('fs');
                    // app.get('/results.json', function(req,res){
                    // 	res.sendFile(__dirname+'/results.json');
                    // });

                    // fs.readFile('history.json', 'utf8', function(err, data) {
                    //     if (err) throw err;
                    //     obj = JSON.parse(data);
                    //     if (msg != "") {
                    //         obj.results.push(msg);
                    //
                    //         fs.writeFile('history.json', JSON.stringify(obj, null, 4), function(err) {
                    //             if (err) {
                    //                 console.log(err);
                    //             } else {
                    //                 console.log("JSON saved!");
                    //             }
                    //         });
                    // }

                    ui.init();

                });

                $(document).on("pagecreate", "#pageone", function() {
                    $(document).on("swiperight", ".ui-content", function(event) {
                        $(":mobile-pagecontainer").pagecontainer("change", "#pagetwo")
                          ui.pageNumChecker();

                    });
                });

                $(document).on("pagecreate", "#pagetwo", function() {
                    $(document).on("swipeleft", ".ui-content", function(event) {
                        $(":mobile-pagecontainer").pagecontainer("change", "#pageone")
                          ui.pageNumChecker();
                    });
                })



                    var ui = {
                      pageNum : 1,
                      lastPage : "",
                      currentPage : "",
                    };

                    ui.init = function() {

                        ui.topMenuStatus = false;
                        ui.collectState = false;


                        ui.topmenu = document.getElementById("topmenu");
                        ui.searchBtn = document.getElementById("searchbutton");

                        ui.pageNumChecker();

                        topmenu.addEventListener("click", function() {
                            ui.chooseThis();
                        });

                        ui.searchBtn.addEventListener("click", function() {
                          $(":mobile-pagecontainer").pagecontainer("change", "#searchpage")
                          ui.pageNumChecker();
                        });

                        ui.topmenu.addEventListener("click", function() {

                          if(ui.pageNum >= 3){
                            ui.goBack();
                          }else{
                            ui.goToSliderPanel();
                          }

                        });

                    };

                    ui.pageNumChecker = function(){

                      ui.lastPage = ui.currentPage;

                      ui.currentPage = window.location.hash;


                      if(ui.currentPage + "" == "" || ui.currentPage == "#pageone"){
                          ui.pageNum = 1;
                      }
                      else if (ui.currentPage == "#pagetwo") {
                          ui.pageNum = 2;
                      } else if (ui.currentPage == "#searchpage") {
                          ui.pageNum = 3;
                      } else if (ui.currentPage == "#mywhichonepage") {
                          ui.pageNum = 4;
                      }

                      ui.updatePage(ui.pageNum);
                    }

                    ui.updatePage = function(pageNum) {

                      //console.log(pageNum);

                        if (pageNum < 3) {
                            topmenu.style.backgroundImage = "url('./img/wo-profile.png')";
                            ui.searchBtn.style.display = "block";

                        } else if (pageNum >= 3) {
                            ui.topmenu.style.backgroundImage = "url('./img/goback.png')";
                            ui.searchBtn.style.display = "none";

                        }
                    };

                    ui.goToSliderPanel = function() {

                        ui.topMenuStatus = !ui.topMenuStatus;
                        var profilePanel = document.getElementById("profilePanel");

                        if (ui.topMenuStatus === true) {

                            profilePanel.style.transform = "translateX(0%)";
                        } else {
                            profilePanel.style.transform = "translateX(-100%)";
                        }
                    };

                    ui.goToWhichOnePage = function() {
                        var mywhichone = document.getElementById("mywhichone");
                        mywhichone.addEventListener("click", function() {
                            ui.update(3);
                        });
                    };

                    ui.goBack = function() {
                      $(":mobile-pagecontainer").pagecontainer("change", ui.lastPage);
                      ui.pageNumChecker();
                    };

                    ui.chooseThis = function() {

                        var chooseBtn = document.getElementById("footer");

                        var changeColor = function(state) {
                            if (state === true) {
                                chooseBtn.style.backgroundPosition = "center top";
                            } else {
                                chooseBtn.style.backgroundPosition = "center bottom";
                            }
                        }
                        chooseBtn.addEventListener("click", function() {
                            ui.collectState = !ui.collectState;
                            changeColor(collectState);
                        });

                    };

                    ui.getSearchResult =  function(){
                        var allsearches = [];
                        var currentsearch = document.getElementById("searchbox").value;
                        for (var i = 0; i < myhistory.length; i++) {
                            if (currentsearch == myhistory[i].title)
                                allsearches.push(currentsearch[i]);
                        }
                        for (var i = 0; i < allsearches.length; i++) {
                            document.getElementById("searchresult").innerHTML += "<p>+myhistoty.history[i].title" + "</p>";
                        }
                    };

    </script>

</head>

<body>




    <!-- slider panel -->
    <div id="profilePanel">

        <p class="profilecontent" id="mywhichone">My Which One</p>
        <P class="profilecontent">Setting</p>

    </div>


    <!-- header -->
    <div id="header" class="mom">

        <div id="topmenu" class="child"></div>
        <div id="date" class="child">
            03/27/2017
        </div>
        <div id="searchbutton" class="child"></div>


    </div>

    <div id="footer" class="bar">

    </div>


    <!--  page two content-->
    <div data-role="page" id="pageone" class="wopage">

        <div data-role="main" class="ui-content">

            <div class="p-content">


                <div <div id="p1-pic" class="wo-pic"></div>

                <div id="p1-title" class="wo-title1">
                    James Turrell
                </div>

                <div id="p1-title" class="wo-title2">
                    How James Turrell Knocked the Art World Off Its Feet
                </div>

                <div class="clickToRead">
                    Read the full content
                </div>


            </div>
        </div>
    </div>


    <!-- Page one content -->
    <div data-role="page" id="pagetwo" class="wo-page">

        <div data-role="main" class="ui-content">

            <div class="p-content">

                <div id="p2-pic" class="wo-pic">
                </div>

                <div id="p2-title" class="wo-title1">
                    Dear Angelica
                </div>
                <div id="p2-title" class="wo-title2">
                    How Oculus Reinvented VR Animation With a Little Help From Geena Davis
                </div>
                <div class="clickToRead">
                    Read the full content
                </div>

            </div>

        </div>

    </div>


    <!-- my whichone page -->
    <div data-role="page" id="mywhichonepage" class="wo-page">
        <div data-role="main" class="ui-content">
            <p>This is mywhichonepage</p>
            <a id="whichBackBtn" class="ui-btn-c">Back</a>
        </div>
    </div>


    <!-- search page -->
    <div style = "padding:64px 24px 0px 24px; box-sizing:border-box;" data-role="page" id="searchpage" class="wo-page">


        <input placeholder=" Search" id="searchbox"><br />
        <!-- <button id="searchbtn" type="button"> Search </button> -->

        <div id="searchresult">

        </div>

    </div>


</body>

</html>
