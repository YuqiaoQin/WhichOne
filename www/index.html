<!DOCTYPE html>

<html>

<head>

    <meta name="viewport" id="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
    <style>
        html,
        body,
        .ui-page {
            /* specify page */
            /*margin-top: 30px;*/
            height: 100%;
            margin: 0px;
            padding: 0;
            overflow-y: hidden;
            background-color: white;
        }

        .ui-bar-c {
            background: white;
        }

        .ui-btn-c {
            width: 20px;
            height: 10px;
            color: black;
            margin-left: 10px;
        }

        #topPanel {
            width: 100%;
            top: -100%;
            position: absolute;
            bottom: auto;
            height: 100%
        }

        #toppanelcontainer {
            background-color: rgba(255, 255, 255, 0.9);
            height: 100%;
        }

        .wo-header {
            position: absolute;
            border: 0px;
            top: 0px;
            left: 0px;
            height: 10%;
            width: 100%;
        }

        #p1-content {
            margin-top: 64px;
            height: 75%;
        }

        #p1-pic {
            background: url("./img/wo-p1-01.jpg");
            background-size: cover;
        }

        #p2-pic {
            background: url("./img/wo-p2-01.jpg");
            background-size: cover;
        }

        .ui-content {
            padding: 0px;
            height: inherit;
        }

        .wo-profile {
            width: 80%;
            height: 80%;
        }

        .wo-pic {
            height: 61.8%;
            width: 100%;
        }

        .wo-title1 {
            /*color: rgb(81, 81, 81);*/
            margin-left: 15px;
            margin-top: 40px;
            font-size: 24px;
            font-family: "Helvetica Neue Condensed Bold", Helvetica, monospace;
        }

        .wo-title2 {
            /*color: rgb(81, 81, 81);*/
            margin-left: 15px;
            margin-top: 10px;
            margin-right: 40px;
            font-size: 14px;
            font-family: "Helvetica Neue Condensed Bold", Helvetica, inherit;
        }

        #p1-bar {
            background: url("./img/wo-bar.jpg");
            background-position: bottom;
            background-size: 100% 200%;
            height: 16%;
            width: 100%;
            border: 0px;
            z-index: 998;
            position: absolute;
            bottom: 0px;
        }

        #p2-bar {
            /*background: url("./img/wo-bar-02.jpg");*/
            background-size: contain;
            background-position: center;
            height: 15%;
            width: 100%;
        }

        #profilemenu {
            margin-top: 20px;
            left: 15px;
            height: 32px;
            width: 28px;
            cursor: pointer;
            border-radius: 50%;
            background-image: url("./img/wo-profile.png");
            background-position: center;
            background-repeat: no-repeat;
            background-size: 80% 80%;
            z-index: 999;
        }

        #profilePanel {
            transition: all 0.3s ease-in-out;
            width: 200px;
            height: 80%;
            background-color: rgba(255, 255, 255, 0.9);
            position: absolute;
            top: 0px;
            left: 0px;
            box-sizing: border-box;
            padding-top: 120px;
            z-index: 998;
            transform: translateX(-100%);
        }

        p#currentdate {
            text-align: center;
            margin-top: 29px;
            margin-bottom: 0px;
        }

        p.profilecontent {
            margin-left: 15px;
        }
    </style>

    <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script type="text/javascript" src="cordova.js"></script>
    <script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
    <script>
        // var allsearches = [];
        var allsearches = [{
                title: "Here is content 1",
                description: "description"
            },
            {
                title: "Here is content 1",
                description: "description"
            },
            {
                title: "Here is content 1",
                description: "description"
            }
        ];


        $(document).on("pagecreate", "#pageone", function() {
            $(document).on("swiperight", ".ui-content", function(event) {
                //console.log("swiperight on ui-content");
                $(":mobile-pagecontainer").pagecontainer("change", "#pagetwo");
            });
        });

        $(document).on("pagecreate", "#pagetwo", function() {
            $(document).on("swipeleft", ".ui-content", function(event) {
                $(":mobile-pagecontainer").pagecontainer("change", "#pageone")
            });
        })


        var deltaY = 0;
        var endY = 0;
        var topPanelPos = 0;


        window.addEventListener("load", function() {


            function buttonClicked() {
                var currentsearch = getElementById("searchhistory").value;
                allsearches.push(currentsearch);
                var allsearchesString = JSON.stringify(allsearches);
                localStorage.setItem("allsearches", allsearchesString);

            }

            function load() {
                var allsearchesString = localStorage.getItem("allsearches");
                if (allsearchString != null) {
                    allsearches = JSON.parse(allsearchesString);
                    for (var i = 0; i < allsearches.length; i++) {
                        document.getElementById("savedsearches").innerHTML+=allsearch[i];

                    }
                }
                document.getElementById("searchtext").value=localStorage.getItem("lastsearch");
                searchButton=document.getElementById("searchbutton");
                searchbutton.addEventListener("click",buttonClicked);
            }


            var topPanel = document.getElementById("topPanel");

            document.addEventListener("touchstart", function(event) {
                topPanel.style.transition = "none";
                endY = event.targetTouches[0].clientY;
                //console.log(startY);
            })

            document.addEventListener("touchmove", function(event) {
                var startY = event.targetTouches[0].clientY;
                deltaY = startY - endY;
                endY = startY;
                topPanelPos += deltaY;
                if (topPanelPos < 300) {
                    topPanel.style.transform = "translateY(" + topPanelPos + "px)";
                } else {
                    topPanel.style.transform = "translateY(100%)";
                }
                //console.log(deltaY);
            });

            document.addEventListener("touchend", function(event) {
                topPanel.style.transition = "transform 0.3s ease-in-out";
                if (topPanelPos >= 30) {
                    // topPanel.style.transform = "translateY(30%)";
                    topPanelPos = 200;
                } else if (topPanelPos < 30) {
                    topPanel.style.transform = "translateY(-100%)";
                    topPanelPos = 0;
                }
                deltaY = 0;

                var topPanelY = topPanel.style.transform;
                if (topPanelY == "translateY(0%)") {
                    topPanel.style.zIndex = 996;
                } else {
                    topPanel.style.zIndex = 1000;
                }
            });

            var menuStatus = false;
            var menu = document.getElementById("profilemenu");
            console.log(menu);
            var profilePanel = document.getElementById("profilePanel");

            var toggleMenu = function(status) {

                if (status === true) {
                    profilePanel.style.transform = "translateX(0%)";
                } else {
                    profilePanel.style.transform = "translateX(-100%)";
                }
            }

            menu.addEventListener("click", function() {
                console.log("hi");

                menuStatus = !menuStatus;
                toggleMenu(menuStatus);
            });
            // var panelStatus=false;
            // var page1=document.getElementById("pageone");
            //
            // var backPanel=function(status){
            //   if(status=== true){
            //     profilePanel.style.transform = "translateX(-100%)";
            //   }else{
            //     profilePanel.style.transform = "translateX(0%)";
            //   }
            // }
            //
            // page1.addEventListener("click",function(){
            //   panelStatus=!panelStatus;
            //   backPanel(panelStatus);
            // })


            var bar1 = document.getElementById("p1-bar");
            var page1 = document.getElementById("pageone");
            var collectState = false;


            var changeColor = function(state) {
                if (state === true) {
                  bar1.style.backgroundPosition = "center top";
                } else {
                  bar1.style.backgroundPosition = "center bottom";
                }
            }
            page1.addEventListener("click", function() {
                collectState = !collectState;
                changeColor(collectState);
            });

            var currentHash = "";

            var mywhichone = document.getElementById("mywhichone");
            mywhichone.addEventListener("click", function() {
                currentHash = window.location.hash;
                $(":mobile-pagecontainer").pagecontainer("change", "#mywhichonepage")

            });

            var whichBackBtn = document.getElementById("whichBackBtn");
            whichBackBtn.addEventListener("click",function(){
              //console.log("uadgsykfj");
              $(":mobile-pagecontainer").pagecontainer("change", currentHash);
            });

        });
    </script>

</head>

<body>
    <div id="savedsearches">
    </div>
    <div id="topPanel">

        <div id="toppanelcontainer">
            <div id="search">
                <input type="text" value="search" id="searchhistory"><br />
                <button id="searchbutton" type="button"> Search </button>
            </div>
        </div>
    </div>

    <div id="profilePanel">
        <p class="profilecontent">Myself</p>
        <p class="profilecontent" id="mywhichone">My Which One</p>
        <P class="profilecontent">Setting</p>

    </div>

    <div id="profilemenu" class="wo-header">

    </div>


    <div data-role="page" id="pageone" class="wo-page">

        <div data-role="header" data-theme="c" class="wo-header">

            <p id="currentdate">03/27/2017</p>

        </div>


        <div data-role="main" class="ui-content">

            <div id="p1-content">

                <div id="p1-pic" class="wo-pic">
                </div>

                <div id="p1-title" class="wo-title1">
                    Dear Angelica
                </div>
                <div id="p1-title" class="wo-title2">
                    How Oculus Reinvented VR Animation With a Little Help From Geena Davis
                </div>

            </div>

            <div data-role="footer" id="p1-bar" class="bar">

            </div>

        </div>
    </div>

    <div data-role="page" id="pagetwo" class="wopage">

        <div data-role="main" class="ui-content">
            <div <div id="p2-pic" class="wo-pic">
            </div>
            <div id="p2-title" class="wo-title1">
                Dear Angelica
            </div>

            <div id="p2-title" class="wo-title2">
                How Oculus Reinvented VR Animation With a Little Help From Geena Davis
            </div>
            <div id="p2-bar" class="bar">

            </div>
        </div>
    </div>
    <div data-role="page" id="mywhichonepage" class="wo-page">
        <div data-role="main" class="ui-content">
            <p>This is mywhichonepage</p>
            <a id = "whichBackBtn" class="ui-btn-c">Back</a>
        </div>
        <div>



</body>

</html>
